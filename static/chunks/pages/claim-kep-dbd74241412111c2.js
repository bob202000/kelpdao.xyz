(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1248],{57793:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/claim-kep",function(){return n(70574)}])},14035:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(85893),r=n(32568),o=n(67294),s=n(8193),l=e=>{let{label:t}=e,[n,l]=(0,o.useState)(!1);return(0,i.jsx)(r.u,{label:t,isOpen:n,closeDelay:2e3,onClose:()=>l(!1),pointerEvents:"all",color:"textSecondary",fontSize:"12px",bg:"backgroundCard",p:"8px",borderRadius:"8px",children:(0,i.jsx)("span",{children:(0,i.jsx)(s.ocf,{onMouseEnter:()=>l(!0),onClick:()=>l(!0)})})})}},83e3:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var i=n(19011),r=n(10777);function o(){return(0,r.a)({queryKey:["el-merkle-root"],queryFn:async()=>(await (0,i.J9)()).data})}},70574:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var i=n(85893),r=n(4627),o=n(30508),s=n(46697),l=n(70853),a=n(93717),d=n(57747),c=n(71293),x=n(14225),p=n(7174),u=e=>(0,i.jsx)(p.m.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});u.displayName="StackItem";var h=n(25432);Object.freeze(["base","sm","md","lg","xl","2xl"]);var m=n(92495),g=n(16554),f=n(67294),b=(0,g.G)((e,t)=>{let{isInline:n,direction:r,align:o,justify:s,spacing:l="0.5rem",wrap:a,children:d,divider:c,className:x,shouldWrapChildren:g,...b}=e,j=n?"row":null!=r?r:"column",v=(0,f.useMemo)(()=>(function(e){var t;let{spacing:n,direction:i}=e,r={column:{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(t=e=>r[e],Array.isArray(i)?i.map(e=>null===e?null:t(e)):(0,h.Kn)(i)?Object.keys(i).reduce((e,n)=>(e[n]=t(i[n]),e),{}):null!=i?t(i):null)}})({spacing:l,direction:j}),[l,j]),k=!!c,y=!g&&!k,w=(0,f.useMemo)(()=>{let e=(0,m.W)(d);return y?e:e.map((t,n)=>{let r=void 0!==t.key?t.key:n,o=n+1===e.length,s=(0,i.jsx)(u,{children:t},r),l=g?s:t;if(!k)return l;let a=(0,f.cloneElement)(c,{__css:v});return(0,i.jsxs)(f.Fragment,{children:[l,o?null:a]},r)})},[c,v,k,y,g,d]),S=(0,h.cx)("chakra-stack",x);return(0,i.jsx)(p.m.div,{ref:t,display:"flex",alignItems:o,justifyContent:s,flexDirection:j,flexWrap:a,gap:k?void 0:l,className:S,...b,children:w})});b.displayName="Stack";var j=(0,g.G)((e,t)=>(0,i.jsx)(b,{align:"center",...e,direction:"column",ref:t}));j.displayName="VStack";var v=n(12998),k=n(32871),y=n(78001),w=n(2593),S=n(25675),E=n.n(S),P=e=>{let{isOpen:t,onClose:n,elPoints:r,actionText:o}=e;return(0,i.jsx)(k.Z,{isOpen:t,closeAlert:n,children:(0,i.jsxs)(a.k,{padding:{base:"24px 16px",md:"40px"},flexDirection:"column",width:"100%",gap:"32px",children:[(0,i.jsxs)(a.k,{justifyContent:"space-between",align:"center",children:[(0,i.jsx)(c.x,{fontSize:"16px",lineHeight:"24px",fontWeight:"600",children:"Claiming $KEP"}),(0,i.jsxs)(x.z,{variant:"unstyled",display:"flex",p:{base:"1.5rem 0",md:0},height:"24px",onClick:n,_focus:{boxShadow:"none"},children:[(0,i.jsx)(v.d,{above:"md",children:(0,i.jsx)(E(),{height:24,width:24,alt:"close",src:"/assets/close.svg"})}),(0,i.jsx)(v.d,{below:"md",children:(0,i.jsx)(E(),{height:4,width:20,alt:"close",src:"/assets/close_mobile.svg"})})]})]}),(0,i.jsxs)(a.k,{flexDir:"column",background:"#f5f5f5",borderRadius:"20px",p:"16px",gap:"16px",children:[(0,i.jsxs)(a.k,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(a.k,{flexDir:"column",children:[(0,i.jsx)(c.x,{fontSize:"14px",lineHeight:"21px",fontWeight:"500",color:"textTertiary",children:"You are converting"}),(0,i.jsxs)(c.x,{fontSize:"32px",lineHeight:"48px",fontWeight:"600",children:[(0,y.xr)(r.toString())," EL Points"]})]}),(0,i.jsx)(d.xu,{lineHeight:0,p:"8px",background:"#E0E0E0",borderRadius:"100%",width:"56px",height:"56px",pos:"relative",children:(0,i.jsx)(E(),{src:"/assets/claim/eigen.svg",alt:"eigen",fill:!0})})]}),(0,i.jsx)(d.xu,{lineHeight:0,borderRadius:"100%",width:"36px",height:"36px",pos:"relative",children:(0,i.jsx)(E(),{src:"/assets/arrow_down.svg",alt:"eigen",fill:!0})}),(0,i.jsxs)(a.k,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(a.k,{flexDir:"column",children:[(0,i.jsx)(c.x,{fontSize:"14px",lineHeight:"21px",fontWeight:"500",color:"textTertiary",children:"You will get"}),(0,i.jsxs)(c.x,{fontSize:"32px",lineHeight:"48px",fontWeight:"600",children:[(0,y.xr)(r.mul(995).div(1e3).toString())," $KEP"]})]}),(0,i.jsx)(d.xu,{lineHeight:0,p:"8px",background:"#E0E0E0",borderRadius:"100%",width:"56px",height:"56px",pos:"relative",children:(0,i.jsx)(E(),{src:"/assets/claim/kep.svg",alt:"eigen",fill:!0})})]}),(0,i.jsxs)(a.k,{background:"backgroundField",justifyContent:"space-between",p:"8px 10px",fontSize:"12px",lineHeight:"18px",fontWeight:"400",children:[(0,i.jsx)(c.x,{children:"Fees (0.5%)"}),(0,i.jsxs)(c.x,{children:[(0,y.xr)(w.O$.from(r).mul(5).div(1e3).toString())," ","KEP"]})]})]}),(0,i.jsxs)(a.k,{align:"center",justifyContent:"center",gap:"10px",children:[(0,i.jsx)(E(),{src:"/assets/loader.svg",alt:"eigen",height:40,width:40}),o]})]})})},W=n(14035),C=n(89469),H=n(92321),D=n(705),z=n(72272),_=n(89810),R=n(98029),L=n(10777),N=n(19011),K=n(8074),I=n(66403);let T=()=>{let e=K.Pl[I.R.id],{data:t}=(0,_.u)({...e.interactionPools.merkleDistributor,functionName:"currentMerkleRootIndex",chainId:I.R.id});return t&&Number(t)};var F=n(50389),O=n(83230),Z=n(36227),B=n(17679),A=n(56371),M=n(83e3),$=n(37241),q=n(13821),V=n(2452);let U=()=>({open:!1,hash:"",error:"",hasUserDenied:!1});var G=()=>{var e,t,n,r,o;let{isConnected:s,address:l}=(0,H.m)(),[p,u]=(0,f.useState)(U()),[h,m]=(0,f.useState)({open:!1,text:""}),{mutate:g}=function(){let{data:e}=(0,C.p)(),t=T(),{config:n}=(0,$.Z)(),{address:i}=(0,H.m)(),r=(0,D.t)();return(0,R.D)({mutationFn:async o=>{if(!e||!r||!i||!t||!n.interactionPools.merkleDistributor)return;let s=await r.estimateContractGas({...n.interactionPools.merkleDistributor,functionName:"claim",args:[t,i,o.cumulativeAmount,o.merkleProof],address:i});s<115000n&&(s=115000n);let l=await e.writeContract({...n.interactionPools.merkleDistributor,functionName:"claim",chain:I.R,args:[t,i,o.cumulativeAmount,o.merkleProof],gas:2n*s});return{hash:l,wait:()=>r.waitForTransactionReceipt({hash:l})}}})}(),{config:b,isClaimSupported:v}=(0,$.Z)(),k=K.Pl[I.R.id],{chain:S}=(0,q.Z)(),{switchChain:G}=(0,z.o)(),{data:J}=(0,L.a)({queryKey:["kelp-stats",l],queryFn:()=>(0,N.jS)(l),enabled:void 0!==l}),{data:Q,refetch:X}=(0,_.u)({...k.interactionPools.merkleDistributor,functionName:"userClaims",chainId:I.R.id,args:[l],query:{enabled:!!l}}),{data:Y,refetch:ee}=function(e){let t=T();return(0,L.a)({queryKey:["el-merkle-proof",e,t],queryFn:async()=>(await (0,N.Vr)(e,w.O$.from(t))).data,enabled:void 0!==t&&void 0!==e})}(l),et=(0,_.u)({...k.interactionPools.kep,functionName:"totalSupply",chainId:I.R.id}),en=(0,_.u)({...k.interactionPools.kep,functionName:"balanceOf",chainId:I.R.id,args:[k.interactionPools.merkleDistributor.address]}),{data:ei,refetch:er}=(0,M.P)(),{openConnectModal:eo}=(0,V.We)(),es=()=>{X(),ee(),en.refetch(),er()},el=w.O$.from((null==Q?void 0:Q[1])||"0"),ea=(null==Y?void 0:Y.data)===void 0?void 0:(null==Y?void 0:Y.data)===null?w.O$.from(0):w.O$.from(null==Y?void 0:null===(e=Y.data)||void 0===e?void 0:e.el),ed=el&&ea?ea.sub(el):void 0,ec=(null==J?void 0:null===(n=J.data)||void 0===n?void 0:null===(t=n.value)||void 0===t?void 0:t.elPoints)&&(0,A.parseEther)(null==J?void 0:null===(o=J.data)||void 0===o?void 0:null===(r=o.value)||void 0===r?void 0:r.elPoints);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.k,{justifyContent:"center",p:{base:"0 16px",sm:"0 40px",md:0},children:(0,i.jsxs)(a.k,{flexDir:"column",gap:"16px",mt:{base:"16px",xl:"0px"},w:{base:"100%",md:"648px"},children:[(0,i.jsxs)(a.k,{gap:"16px",justifyContent:"stretch",children:[(0,i.jsxs)(d.xu,{borderRadius:"1rem",bg:"backgroundField",border:"1px solid",color:"textEigen",borderColor:"backgroundDivider",p:"16px",flex:"1",position:"relative",overflow:"hidden",children:[(0,i.jsx)(c.x,{fontSize:{base:"16px",md:"24px"},lineHeight:{base:"24px",md:"38px"},fontWeight:{base:"600",md:"800"},children:(null==ei?void 0:ei.data)?Number((0,y.Md)((0,A.formatEther)(BigInt(Number(null==ei?void 0:ei.data.totalElPoints)).toString()).toString(),2)).toLocaleString():"-"}),(0,i.jsx)(c.x,{fontSize:{base:"10px",md:"12px"},lineHeight:{base:"15px",md:"18px"},fontWeight:"400",opacity:"80%",children:"EL points earned on Kelp"}),(0,i.jsx)(d.xu,{height:"84px",width:"84px",position:"absolute",bottom:"-12px",right:"-12px",hideBelow:"md",pos:"relative",children:(0,i.jsx)(E(),{src:"/assets/claim/eigen.svg",alt:"eigen",fill:!0})})]}),(0,i.jsxs)(d.xu,{borderRadius:"1rem",bg:"backgroundField",border:"1px solid",color:"textPrimary",borderColor:"backgroundDivider",p:"16px",flex:"1",position:"relative",overflow:"hidden",children:[(0,i.jsx)(c.x,{fontSize:{base:"16px",md:"24px"},lineHeight:{base:"24px",md:"38px"},fontWeight:{base:"600",md:"800"},children:et.data&&en.data?Number((0,y.Md)((0,A.formatEther)(String(et.data-en.data)),2)).toLocaleString():"-"}),(0,i.jsx)(c.x,{fontSize:{base:"10px",md:"12px"},lineHeight:{base:"15px",md:"18px"},fontWeight:"400",opacity:"80%",children:"$KEP tokens claimed"}),(0,i.jsx)(d.xu,{height:"84px",width:"84px",position:"absolute",bottom:"-12px",right:"-12px",hideBelow:"md",pos:"relative",children:(0,i.jsx)(E(),{src:"/assets/claim/kep.svg",alt:"kelp",fill:!0})})]})]}),(0,i.jsxs)(a.k,{borderRadius:"24px",bg:"backgroundCard",p:{base:"16px 16px 24px",md:"40px"},flexDir:"column",gap:{base:"32px",md:"40px"},w:"100%",children:[(0,i.jsxs)(a.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsx)(c.x,{fontSize:{base:"18px",md:"32px"},lineHeight:{base:"20px",md:"38px"},fontWeight:"600",color:"textPrimary",children:"Claim $KEP"}),(0,i.jsx)(c.x,{p:"4px 6px",bg:"backgroundField",fontWeight:"400",fontSize:"10px",lineHeight:"15px",rounded:"6px",children:"1 $KEP = 1 EL Point"})]}),(0,i.jsxs)(a.k,{flexDir:"column",gap:{base:"8px",md:"16px"},children:[(0,i.jsxs)(a.k,{justifyContent:"space-between",fontSize:{base:"14px",md:"16px"},lineHeight:"24px",fontWeight:"400",children:[(0,i.jsxs)(a.k,{alignItems:"center",gap:"4px",children:[(0,i.jsx)(c.x,{children:"Claimable EL Points"}),(0,i.jsx)(W.Z,{label:(0,i.jsxs)(d.xu,{children:["EL points accumulated till last Tuesday ",(0,i.jsx)("br",{})," are made available for conversion"]})})]}),(0,i.jsxs)(c.x,{children:[(0,i.jsx)(c.x,{fontWeight:"700",as:"span",children:ed?(0,y.xr)(ed.toString()):"-"})," ","EL Points"]})]}),(0,i.jsxs)(a.k,{justifyContent:"space-between",fontSize:{base:"10px",md:"12px"},lineHeight:"18px",fontWeight:"400",children:[(0,i.jsxs)(a.k,{alignItems:"center",gap:"4px",children:[(0,i.jsx)(c.x,{children:"Fee"}),(0,i.jsx)(W.Z,{label:(0,i.jsx)(d.xu,{children:"Fee (0.5%) for DeFi enablement of KEP"})})]}),(0,i.jsxs)(c.x,{children:[void 0===ed?"-":(0,y.xr)(ed.mul(5).div(1e3).toString())," ","KEP"]})]})]}),(0,i.jsx)(x.z,{borderRadius:"12px",bg:"textPrimary",p:"16px 64px",h:"56px",mt:"12px",width:"100%",_hover:{bg:"textPrimary"},onClick:v?()=>{if(s){if(v){if(null==Y?void 0:Y.data){var e,t;(0,O.L9)("claim-kep-click",null==Y?void 0:Y.data),m({open:!0,text:"Please sign the transaction"}),g({cumulativeAmount:null==Y?void 0:null===(e=Y.data)||void 0===e?void 0:e.el,merkleProof:null==Y?void 0:null===(t=Y.data)||void 0===t?void 0:t.proof},{async onSuccess(e){m({open:!0,text:"Transaction in progress"});try{let t=await e.wait();(0,O.L9)("claim-kep",t),u({open:!0,hash:t.transactionHash,error:"",hasUserDenied:!1}),es()}catch(e){var t,n,i;(0,O.L9)("claim-kep",e),u({open:!0,hash:e.transactionHash,error:null!==(i=null!==(n=null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:null==e?void 0:e.error)&&void 0!==n?n:null==e?void 0:e.message)&&void 0!==i?i:"",hasUserDenied:(0,O.f)(e)})}finally{m({open:!1,text:""})}},async onError(e){var t,n,i;(0,O.L9)("claim-kep",e),u({open:!0,hash:e.transactionHash,error:null!==(i=null!==(n=null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:null==e?void 0:e.error)&&void 0!==n?n:null==e?void 0:e.message)&&void 0!==i?i:"",hasUserDenied:(0,O.f)(e)}),m({open:!1,text:""})}})}}else(0,O.Jc)(B.F.SWITCH_NETWORK)}else null==eo||eo(),(0,O.L9)(Z.vL,{type:"center_wiget"})}:()=>G({chainId:I.R.id}),isDisabled:s&&v?void 0===ed||ed.eq(0):!s,children:(0,i.jsx)(c.x,{fontSize:"16px",lineHeight:"24px",fontWeight:"600",color:"backgroundCard",children:b.interactionPools.kep?s?v?y.F:"Switch network":y.WB:"Switch to Ethereum"})})]}),(0,i.jsxs)(a.k,{direction:"column",borderRadius:"24px",bg:"backgroundCard",p:{base:"24px 16px",md:"40px"},w:{base:"100%",md:"648px"},gap:{base:"24px"},children:[(0,i.jsxs)(a.k,{justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(j,{spacing:"8px",alignItems:"flex-start",children:[(0,i.jsx)(c.x,{fontSize:{base:"12px",md:"14px"},lineHeight:{base:"18px",md:"21px"},fontWeight:{base:"400",md:"600"},children:"My Claimed KEP"}),(0,i.jsxs)(c.x,{fontSize:{base:"24px",md:"32px"},lineHeight:{base:"28px",md:"48px"},fontWeight:{base:"700",md:"700"},children:[el?(0,y.xr)(el.mul(995).div(1e3).toString()):"-"," ","KEP"]})]}),(0,i.jsx)(d.xu,{lineHeight:0,hideBelow:"md",pos:"relative",children:(0,i.jsx)(E(),{src:"/assets/claim/kep.svg",alt:"kelp",fill:!0})})]}),(0,i.jsxs)(a.k,{direction:"column",gap:"16px",children:[(0,i.jsx)(c.x,{fontSize:{base:"12px",md:"14px"},lineHeight:{base:"18px",md:"21px"},fontWeight:{base:"400",md:"600"},children:"My EL Points"}),(0,i.jsxs)(a.k,{justifyContent:"space-between",fontSize:{base:"14px",md:"16px"},lineHeight:"24px",fontWeight:"400",children:[(0,i.jsx)(c.x,{children:"Converted"}),(0,i.jsxs)(c.x,{children:[(0,i.jsx)(c.x,{fontWeight:"700",as:"span",children:el?(0,y.xr)(el.toString()):"-"})," ","EL Points"]})]}),(0,i.jsxs)(a.k,{justifyContent:"space-between",fontSize:{base:"14px",md:"16px"},lineHeight:"24px",fontWeight:"400",children:[(0,i.jsx)(c.x,{children:"Available for future cycles"}),(0,i.jsxs)(c.x,{children:[(0,i.jsx)(c.x,{fontWeight:"700",as:"span",children:ec&&el?(0,y.xr)(ec.sub(el).toString()):"-"})," ","EL Points"]})]})]})]})]})}),ed&&(0,i.jsx)(P,{isOpen:h.open,onClose:()=>{m({open:!1,text:""})},elPoints:ed,actionText:h.text}),(0,i.jsx)(F.Z,{isOpen:p.open,hash:p.hash,error:p.error,transactionType:"",isTxnProcessing:!1,hasUserDenied:p.hasUserDenied,closeAlert:()=>u(U()),handleTxView:()=>{var e;let t="".concat(null===(e=S.blockExplorers)||void 0===e?void 0:e.default.url,"/tx/").concat(p.hash);window.open(t,"_blank")},chainId:S.id})]})},J=()=>((0,l.Z)(),(0,i.jsx)(o.Z,{Sidebar:(0,i.jsx)(s.Z,{display:{base:"none",xl:"block"},minH:"100vh"}),MobileSideBar:(0,i.jsx)(s.Z,{}),Header:(0,i.jsx)(r.Z,{}),children:(0,i.jsx)(G,{})}))},19011:function(e,t,n){"use strict";n.d(t,{J9:function(){return g},QD:function(){return c},T1:function(){return p},Vr:function(){return m},XE:function(){return l},ZG:function(){return x},c3:function(){return f},fc:function(){return d},jS:function(){return u},tx:function(){return h},uE:function(){return s}});var i=n(9669),r=n.n(i);let o="https://common.kelpdao.xyz",s=async e=>r().post("https://script.google.com/macros/s/AKfycbxBOMrpVjekduyQdbzxbwbRV9eBQHeAl3k9Er1iy5ztWggoKKKRDalD-w_CVMfsdJP-EA/exec",e),l=e=>r().get("".concat(o,"/km-el-points/user/").concat(e)),a="https://universe.kelpdao.xyz",d=e=>r().get("".concat(a,"/rseth/exchangeRate/?lrtToken=").concat(e)),c=()=>r().get("".concat(a,"/rseth/tvl/?lrtToken")),x=e=>r().get("".concat(a,"/rseth/maxDepositLimit/?lrtToken=").concat(e)),p=e=>r().get("".concat(a,"/rseth/totalStaked/?lrtToken=").concat(e)),u=e=>r().get("".concat(o,"/km-el-points/user/").concat(e)),h=()=>r().get("".concat(o,"/km-el-points-debug/total")),m=(e,t)=>r().get("".concat(o,"/el-merkle/proofs/index/").concat(t.toString(),"/").concat(e)),g=()=>r().get("".concat(o,"/el-merkle/root")),f=()=>r().get("".concat(a,"/rseth/apy"))}},function(e){e.O(0,[1778,4617,1664,6407,9669,6510,3344,2888,9774,179],function(){return e(e.s=57793)}),_N_E=e.O()}]);
//# sourceMappingURL=claim-kep-dbd74241412111c2.js.map